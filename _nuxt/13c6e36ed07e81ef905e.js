(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{218:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return v}));n(20),n(70),n(18),n(37);var r=n(5),o=n(69).b.ref("favorite"),c=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e,n,caption){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.child(e).child(n).set({caption:caption,addTime:Date.now()});case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),d=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.child(e).child(n).remove();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){o.child(e).once("value",(function(e){var n=e.val();t(n||{})}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){o.child(e).once("value",(function(e){var n=e.val();t(n||{})}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:return n=t.sent,n=Object.keys(n),t.abrupt("return",n.length);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},347:function(t,e,n){var r=n(29),o=n(94),c=n(38),d=n(30),f=n(348);t.exports=function(t,e){var n=1==t,l=2==t,v=3==t,h=4==t,m=6==t,x=5==t||m,y=e||f;return function(e,f,w){for(var _,k,C=c(e),j=o(C),S=r(f,w,3),T=d(j.length),M=0,A=n?y(e,T):l?y(e,0):void 0;T>M;M++)if((x||M in j)&&(k=S(_=j[M],M,C),t))if(n)A[M]=k;else if(k)switch(t){case 3:return!0;case 5:return _;case 6:return M;case 2:A.push(_)}else if(h)return!1;return m?-1:v||h?h:A}}},348:function(t,e,n){var r=n(349);t.exports=function(t,e){return new(r(t))(e)}},349:function(t,e,n){var r=n(11),o=n(138),c=n(3)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[c])&&(e=void 0)),void 0===e?Array:e}},377:function(t,e,n){var content=n(433);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("1c98ec08",content,!0,{sourceMap:!1})},378:function(t,e,n){var content=n(435);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("b7e68152",content,!0,{sourceMap:!1})},430:function(t,e,n){"use strict";var r=n(29),o=n(8),c=n(38),d=n(139),f=n(140),l=n(30),v=n(142),h=n(141);o(o.S+o.F*!n(97)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,m,x=c(t),y="function"==typeof this?this:Array,w=arguments.length,_=w>1?arguments[1]:void 0,k=void 0!==_,C=0,j=h(x);if(k&&(_=r(_,w>2?arguments[2]:void 0,2)),null==j||y==Array&&f(j))for(n=new y(e=l(x.length));e>C;C++)v(n,C,k?_(x[C],C):x[C]);else for(m=j.call(x),n=new y;!(o=m.next()).done;C++)v(n,C,k?d(m,_,[o.value,C],!0):o.value);return n.length=C,n}})},431:function(t,e,n){"use strict";var r=n(8),o=n(347)(6),c="findIndex",d=!0;c in[]&&Array(1)[c]((function(){d=!1})),r(r.P+r.F*d,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(95)(c)},432:function(t,e,n){"use strict";var r=n(377);n.n(r).a},433:function(t,e,n){(e=n(26)(!1)).push([t.i,".model-list{list-style-type:decimal}.model-list>li{height:30px;border:1px solid #ccc;margin-bottom:10px;text-align:center}.dragging{opacity:.5}.map-tip{background-color:pink;border-radius:4px;text-align:right;font-size:12px;float:right;padding:2px 10px}.map-tip>span{font-weight:900}",""]),t.exports=e},434:function(t,e,n){"use strict";var r=n(378);n.n(r).a},435:function(t,e,n){(e=n(26)(!1)).push([t.i,'.active[data-v-062f74eb]{border-radius:10px;box-shadow:4px 1px 7px #c5bbbb;background:#fff;transform:translateX(15px)}@media (max-width:600px){.book[data-v-062f74eb]{margin-left:14px!important}}.book[data-v-062f74eb]{width:100%;max-width:600px;margin:auto;background-image:repeating-linear-gradient(0deg,rgba(173,164,164,.63922),rgba(173,164,164,.63922) 2px,transparent 0,transparent 50px);position:relative}.book[data-v-062f74eb],.book[data-v-062f74eb]:before{background-color:#ddd}.book[data-v-062f74eb]:before{content:"";display:block;width:50px;height:100%;position:absolute}.content[data-v-062f74eb]{float:left;height:50px;width:100%;line-height:50px;font-size:16px;padding-left:50px;transition:all .5s}.left-circle[data-v-062f74eb]{width:50px;height:50px;border:3px solid #000;transform:rotateX(46deg);margin-left:-23px;border-radius:50%}.space[data-v-062f74eb]{transform-style:preserve-3d}.camera[data-v-062f74eb]{perspective:1000000000px;perspective-origin:50%;overflow:hidden;padding-top:70px}.header-bar[data-v-062f74eb]{color:#fff;width:100%;margin:auto;padding-top:10px;text-align:center;position:fixed;top:0;height:136px;left:0;right:0;z-index:14;background-color:#0071d5;display:flex;flex-direction:column;justify-content:flex-end}',""]),t.exports=e},446:function(t,e,n){"use strict";n.r(e);n(430),n(37);var r=n(5),o=(n(20),n(18),n(50),n(143),n(218)),c=(n(431),n(131)),d={props:{prepareToMap:{type:Array,default:function(){return[]}},favoriteContent:{type:Object,default:function(){}}},data:function(){return{datasList:this.prepareToMap,queryString:"",startString:"",endString:""}},methods:{touchstart:function(){event.target.classList.add("dragging")},touchend:function(){var t=event.changedTouches[0].pageY,e=Object(c.a)(document.querySelectorAll(".model-list>li")),n=e.findIndex((function(e){var n=e.getBoundingClientRect();return t>n.top&&t<n.top+n.height}));if(-1===n){var r=e[e.length-1].getBoundingClientRect();t>r.top+r.height&&(n=e.length-1)}if(-1===n){var o=e[0].getBoundingClientRect();t<o.top&&(n=0)}var d=event.target,f=this.datasList.findIndex((function(t){return t===d.dataset.dist}));f!==n&&(this.datasList.splice(f,1),this.datasList.splice(n,0,d.dataset.dist)),event.target.classList.remove("dragging")},dragstart:function(t){event.dataTransfer.setData("unique",t),event.target.classList.add("dragging")},dragend:function(){event.target.classList.remove("dragging")},droped:function(){var t=event.dataTransfer.getData("unique"),e=event.target.dataset.dist,n=this.datasList.findIndex((function(e){return e==t})),r=this.datasList.findIndex((function(t){return t==e}));this.datasList.splice(n,1),this.datasList.splice(r,0,t)},add:function(){var t=this,e=this.datasList.map((function(e){return t.favoriteContent[e].caption}));e.length<2?alert("選擇景點必須2個以上..."):(this.startString=e.shift(),this.endString=e.pop(),(e=e.join("|"))&&(this.queryString="&waypoints="+e))}}},f=(n(432),n(25)),l={middleware:["storeDataVerify"],components:{AdjectOrder:Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"adjectView",centered:"","ok-only":"",title:"已選擇站點"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:t.add}},[t._v("\n        加入\n      ")])],1)]},proxy:!0}])},[n("div",{staticStyle:{"text-align":"right",color:"#6cbdaa"}},[t._v("\n    拖曳即可調整景點順序\n  ")]),t._v(" "),n("ul",{staticClass:"model-list"},t._l(t.datasList,(function(e){return n("li",{key:"adject"+e,attrs:{draggable:"true","data-dist":e},on:{dragstart:function(n){return t.dragstart(e)},drop:function(e){return e.preventDefault(),e.stopPropagation(),t.droped(e)},dragenter:function(t){t.preventDefault(),t.stopPropagation()},dragover:function(t){t.preventDefault(),t.stopPropagation()},dragend:t.dragend,touchstart:function(e){return e.preventDefault(),t.touchstart(e)},touchend:function(e){return e.preventDefault(),t.touchend(e)}}},[t._v("\n      "+t._s(t.favoriteContent[e].caption)+"\n    ")])})),0),t._v(" "),t._v(" "),t.queryString||t.startString?n("p",{staticClass:"map-tip"},[t._v("\n    溫馨提醒: 可於googleMap視窗中，按下"),n("span",[t._v("更多選項")]),t._v("，看更多訊息唷\n  ")]):t._e(),t._v(" "),t.queryString||t.startString?n("iframe",{staticStyle:{width:"100%",height:"500px"},attrs:{src:"https://www.google.com/maps/embed/v1/directions?key=AIzaSyACCUIh_N26TdQELm4Ey7Bn1lXLaXce288&origin="+t.startString+t.queryString+"&destination="+t.endString,frameborder:"0"}}):t._e()])}),[],!1,null,null,null).exports},data:function(){return{favoriteContent:{},prepareToMap:new Set,updateKey:0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.c)(t.$store.state.authentication);case 2:t.favoriteContent=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{remove:function(){var t=this,e="確定取消 ",n=Array.from(this.prepareToMap);e+=n.map((function(e){return t.favoriteContent[e].caption})).join(" ")+" 訂閱?",confirm(e)&&(n.forEach((function(e){Object(o.d)(t.$store.state.authentication,e),t.prepareToMap.delete(e),delete t.favoriteContent[e],t.$store.dispatch("setShouldUpdateFavorite",!0)})),this.$forceUpdate())},addToMap:function(t){this.prepareToMap.has(t)?this.prepareToMap.delete(t):this.prepareToMap.add(t),this.$forceUpdate(),this.updateKey++}}},v=(n(434),Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header-bar"},[n("h3",[t._v("我的收藏")]),t._v(" "),0===t.prepareToMap.size?n("p",[t._v("\n      點選下方收藏景點，即可加入googleMap中唷\n    ")]):n("div",[n("b-button",{attrs:{pill:"",variant:"success"},on:{click:t.remove}},[t._v("\n        移除收藏\n      ")]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"adjectView",expression:"'adjectView'"}],attrs:{pill:"",variant:"success"}},[t._v("\n        加入map\n      ")])],1)]),t._v(" "),n("div",{staticClass:"camera"},[n("div",{staticClass:"space"},[n("div",{staticClass:"book"},[t._l(t.favoriteContent,(function(e,i){return n("div",{key:"item"+i,class:["content",t.prepareToMap.has(i)?"active":""],on:{click:function(e){return t.addToMap(i)}}},[t._v("\n          "+t._s(e.caption)+"\n        ")])})),t._v(" "),t._l(t.favoriteContent,(function(t,i){return n("div",{key:"circle"+i,staticClass:"left-circle",attrs:{W:""}})}))],2)])]),t._v(" "),t.prepareToMap.size>0?n("AdjectOrder",{key:t.updateKey,attrs:{"prepare-to-map":Array.from(t.prepareToMap),"favorite-content":t.favoriteContent}}):t._e()],1)}),[],!1,null,"062f74eb",null));e.default=v.exports}}]);